#!/bin/bash

# Get all window names in the current session
existing_windows=$(tmux list-windows -F '#W')

# Check if any window is an ai variant (ai, ai2, ai3, etc.)
if ! echo "$existing_windows" | grep -qE "^ai[0-9]*$"; then
    # No ai windows exist, create 'ai'
    tmux new-window -n ai "claude --dangerously-skip-permissions"
else
    # At least one ai window exists, find next available number
    n=2
    while echo "$existing_windows" | grep -q "^ai${n}$"; do
        ((n++))
    done

    tmux new-window -n "ai${n}" "claude --dangerously-skip-permissions"
fi
