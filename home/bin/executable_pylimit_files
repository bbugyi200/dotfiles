#!/bin/bash

# Wrapper around pylimit that only outputs the filenames with violations,
# separated by spaces.

output=$(pylimit "$@" 2>&1)
ec=$?

files=$(echo "${output}" | grep 'VIOLATION:' | sed 's/VIOLATION: \(.*\) has .*/\1/' | tr '\n' ' ' | sed 's/ $//')

if [[ -n "${files}" ]]; then
  echo "${files}"
fi

exit "${ec}"
